---
title: 数组和循环
createTime: 2025/11/16 22:17:52
permalink: /cppstudy/zot30i85/
tags:
  - C/C++
---

**数组** 允许用单个名称(数组名)处理类型相同的几个数据项。这是一个非常常见的需求，例如，处理一组温度值或者一组人的年龄。**循环** 是编程中的另一个基本要素。它允许对一个或多个语句重复执行应用程序需要的次数

## 数组

前面创建的所有变量都可以存储指定类型的一个数据项，例如整数、浮点值、字符、布尔值等。**数组可以存储相同类型的多个数据项**。可以创建整数数组或者字符数组，**实际上，可以创建任何数据类型的数组，只要有可用的内存，数组就可以存储任何类型的数据**

数组表示一系列内存空间的变量，每个内存空间都可以存储相同类型的一个数据项。例如，假定编写了一个程序，用来计算一年温度的平均值。现在要扩展这个程序，计算比该平均值高的温度有多少个，比该平均值低的温度有多少个。此时，需要保存初始的示例数据，但在一个变量中存储每个数据项，程序就会很烦恼，而且不切实可行。使用数组就可以很轻松地完成这个任务。例如

```cpp
double temperatures[366];  // 定义一个长度为 366 的 double  类型的数组 temperatures
```

这个语句定义了一个 `double` 类型的数组，其名称是 `temperatures`，有 $366$ 个值。把数据值称为 **元素**，把在方括号中指定的元素个数称为 **数组的大小**。数组元素没有在这个语句中初始化，所以它们包含垃圾值。

**数组的大小必须用常量整数表达式来指定**。编译器在编译时能够计算的任何整数表达式都可以用于指定数组大小，不过最常用的整数字面值，或者使用字面值进行初始化的 `constexpr` 整型变量

使用一个整数可以引用数组元素，把该整数称为 **数组的索引**。**数组元素的索引是指该元素与数组第一个元素的偏移值**。第一个元素的偏移值是 $0$，因此其索引是 $0$，索引值为 $3$ 表示数组中的第 $4$ 个元素(与第一个元素偏移 $3$ 个元素)。要引用元素，可以在数组名后面的方括号中放置其索引。要把 `temperatures` 数组的第 $4$ 个元素设置为 $99.0$，可以使用如下语句

```cpp
temperatures[3] = 99.0;  // 设置第四个元素为 99.0
```

为了更好的说明数组，来看下面一个数组的定义

```cpp
unsigned int height[6];  // 定义一个长度为 6 的数组 height
```

在执行这个定义语句时，编译器为这 $6$ 个 `unsigned int` 类型的值分配 $6$ 个连续的存储位置。`height` 数组中的每个元素都包含不同的值。因为 `height` 数组的定义没有为数组指定初始值，所以其元素包含的垃圾值(类似于创建一个 `unsigned int` 类型的变量，但不为其指定的初始值)。下面的语句定义了带初始值的数组

```cpp
unsigned int height[6] {26, 37, 47, 55, 62, 75}; // 定义并初始化长度为 6 的数组
```

初始化列表包含 $6$ 个用逗号隔开的值。这些值可能是某个家庭中所有成员的身高，其单位是英寸。每个数组元素都按顺序被赋予列表中的一个初始值，所以元素具有如下图所示的值

![1763307080799-38fd35eb3037375beb8f687ad1515f9e.png](https://cdn.jsdelivr.net/gh/duyupeng36/images@master/wiki/1763307080799-38fd35eb3037375beb8f687ad1515f9e.png)

上图中每个框都表示保存数组元素的一个内存位置。该数组中有 $6$ 个元素，其索引是 $0$(表示第一个元素)到 $5$(表示最后一个元素)。每个元素都可以通过上面的表达式来引用

::: warning

数组的类型决定了存储每个数组元素所需要的内存量。数组的所有元素都存储在一个连续的内存块中。因此，如果 `unsigned int` 类型的值在计算机中需要 $4$ 字节，则 `height` 数组就需要占用 $24$ 字节

:::

**初始化列表中值的个数不能超过数组的元素个数**，否则该语句不会编译。初始化列表中值的个数可以少于数组的元素个数，此时没有提供初始值的元素就初始化为 $0$(对于 `bool` 元素数组则为 `false`)

```cpp
unsigned int height[6] {26, 37, 47};  // 元素为: 26 37 47 0 0 0
```

前 $3$ 个元素具有初始化列表中的值。后 $3$ 个元素的值是 $0$。要把所有元素初始化为 $0$，可以仅使用空的初始化列表

```cpp
unsigned int height[6] {};  // 元素为: 0 0 0 0 0 0
```

有时候，我们需要定义其元素不能修改的数组，只需要在类型前面加上关键字 `const`。下面定义了一个 `unsigned int` 常量的数组

```cpp
const unsigned int height[6] {26, 37, 47, 55, 62, 75};  // 常量的数组
```

编译器将阻止修改这 $6$ 个数组元素中的任何一个（无论赋值、递增还是其他修改）。参与算术表达式的数组元素与其他变量一样，可以用下面的语句计算 `height` 数组中前 $3$ 个元素的总和

```cpp
unsigned int sum {};

sum = height[0] + height[1] + height[2];  // 前三个元素的和
```

在表达式中，数组的每个元素可以像普通整数变量那样操作。如前所述，数组元素可以放在赋值运算符的左边，以设置新值，所以可以在赋值语句中把一个元素的值复制给另一个元素，例如

```cpp
height[3] = height[2];  // 拷贝第三个元素的值到第四个元素
```

但是，**不能利用赋值语句把整个数组的所有元素值赋值到另一个数组的元素，只能操作数组中的各个元素**

```cpp
int array1[3] {1, 2, 3};
int array2[3];

array2 = array1;  // error: 不允许对数组名进行赋值
```

因此，要将一个数组的值复制到另一个数组中，就必须一次复制一个值。此时需要使用 **循环**

## 理解循环

**循环** 是一种机制，**允许重复执行一个或一组语句，直到满足指定的条件为止**。循环有两个基本元素：组成循环体的要重复执行的语句或语句块，以及决定何时停止重复循环的循环条件。**将循环体执行一次称为一次迭代**

循环条件有许多不同的形式，通过了控制循环的不同方式。例如，循环条件可以

+ 执行循环，次数为指定的次数
+ 循环一直执行到给定的值超过另一个值为止
+ 循环一直执行到从键盘输入某个字符为止
+ 为一个元素集合中的每个元素执行循环

可以设置循环条件，以适应使用循环的环境。循环有如下变体

+ `for` 循环：**使循环体执行给定的次数**，但有极大的灵活性
+ 基于范围的 `for` 循环：**为一个元素集合中的每个元素执行一次迭代**
+ `while` 循环：只要指定的条件为 `true`，`while` 循环就继续执行。**条件在迭代开始时检查，所以如果条件开始时就是 `false`，就不执行迭代循环**
+ `do-while` 循环：只要给定的条件为 `true`，`do-while` 循环就继续执行。`do-while` 循环与 `while` 循环不同，因为它在迭代结束时检查条件，所以 **`do-while` 循环中的语句至少执行一次**

下面先介绍 `for` 循环的工作原理

## for 循环

`for` 循环主要用于对语句或语句块执行预知的次数，但也可以用于其他方式。可以使用以分号分隔 $3$ 个表达式来控制 `for` 循环，这 $3$ 哥表达式放在关键字 `for` 后的圆括号中

```cpp
for (initialization; condition; iterate)
{
    // 循环体
}
// 下一条语句
```

如下图演示了 `for` 循环的执行逻辑

![1763309374425-28064e13251a5305282c7dfa8107f458.png](https://cdn.jsdelivr.net/gh/duyupeng36/images@master/wiki/1763309374425-28064e13251a5305282c7dfa8107f458.png)




